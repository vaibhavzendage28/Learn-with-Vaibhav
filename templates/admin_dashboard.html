{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2>⚙️ Admin Dashboard</h2>
    <a href="{{ url_for('admin_logout') }}" class="btn btn-danger btn-sm">Logout</a>
  </div>

  <!-- Flash messages (only dashboard category) -->
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        {% if category == "dashboard" %}
          <div class="alert alert-success alert-dismissible fade show text-center" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
        {% endif %}
      {% endfor %}
    {% endif %}
  {% endwith %}

  <hr>

  <h4>📊 Statistics</h4>
  <div class="row g-4 mt-2">
    <div class="col-md-3">
      <div class="card shadow-lg border-0 text-center h-100">
        <div class="card-body">
          <h5 class="card-title text-primary">👩‍🎓 Students</h5>
          <p class="display-6 fw-bold">{{ stats.total_students }}</p>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card shadow-lg border-0 text-center h-100">
        <div class="card-body">
          <h5 class="card-title text-info">📝 Notes</h5>
          <p class="display-6 fw-bold">{{ stats.total_notes }}</p>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card shadow-lg border-0 text-center h-100">
        <div class="card-body">
          <h5 class="card-title text-success">📚 Assignments</h5>
          <p class="display-6 fw-bold">{{ stats.total_assignments }}</p>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card shadow-lg border-0 text-center h-100">
        <div class="card-body">
          <h5 class="card-title text-danger">⬇️ Downloads</h5>
          <p class="display-6 fw-bold">{{ stats.downloads }}</p>
        </div>
      </div>
    </div>
  </div>

  <hr class="my-4">

  <h4>📂 Manage Content</h4>
  <a href="{{ url_for('upload') }}" class="btn btn-success btn-lg mt-2">
    ➕ Upload Notes/Assignments
  </a>
</div>

<!-- Auto-hide flash messages after 3s -->
<script>
  setTimeout(() => {
    let alerts = document.querySelectorAll('.alert');
    alerts.forEach(alert => {
      let bsAlert = new bootstrap.Alert(alert);
      bsAlert.close();
    });
  }, 3000);
</script>
{% endblock %}
